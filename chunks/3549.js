"use strict";(self.webpackChunkobstacle_component=self.webpackChunkobstacle_component||[]).push([[3549,8163],{53549:(e,n,t)=>{t.r(n),t.d(n,{executeScript:()=>J,extend:()=>_,functionHelper:()=>U});var r=t(32070),a=t(93674),o=t(19249),i=t(7182),l=t(94634),s=t(30359),c=t(94837),u=t(61125),f=t(33556),d=t(56101),w=t(88163),p=t(32200),h=t(63038),g=t(47154),y=t(37614),m=t(20031),v=t(14685);function b(e){return e&&"function"==typeof e.then}const V=100;async function H(e,n){const t=[];for(let r=0;r<n.arguments.length;r++)t.push(await R(e,n.arguments[r]));return t}async function x(e,n,t){return!0===n.preparsed?t(e,null,n.arguments):t(e,n,await H(e,n))}class A extends s.Rm{constructor(e,n){super(),this.definition=null,this.context=null,this.definition=e,this.context=n}createFunction(e){return(...n)=>{const t={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(t.depthCounter.depth>64)throw new i.aV(e,i.rH.MaximumCallDepth,null);return q(this.definition,t,n,null)}}call(e,n){return S(e,n,((t,r,a)=>{const o={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(o.depthCounter.depth>64)throw new i.aV(e,i.rH.MaximumCallDepth,n);return q(this.definition,o,a,n)}))}marshalledCall(e,n,t,r){return r(e,n,(async(a,o,i)=>{const l={spatialReference:e.spatialReference,globalScope:t.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{}};return i=i.map((n=>!(0,c.i)(n)||n instanceof s.Vg?n:(0,s.aq)(n,e,r))),(0,s.aq)(await q(this.definition,l,i,n),t,r)}))}}class I extends r.P{constructor(e){super(e)}async global(e){const n=this.executingContext.globalScope[e.toLowerCase()];if(n.valueset||(n.value=await R(this.executingContext,n.node),n.valueset=!0),(0,c.i)(n.value)&&!(n.value instanceof s.Vg)){const e=new s.Vg;e.fn=n.value,e.parameterEvaluator=S,e.context=this.executingContext,n.value=e}return n.value}setGlobal(e,n){if((0,c.i)(n))throw new i.aV(null,i.rH.AssignModuleFunction,null);this.executingContext.globalScope[e.toLowerCase()]={value:n,valueset:!0,node:null}}hasGlobal(e){return void 0===this.executingContext.exports[e]&&(e=e.toLowerCase()),void 0!==this.executingContext.exports[e]}async loadModule(e){let n=e.spatialReference;null==n&&(n=new v.Z({wkid:102100})),this.moduleScope=W({},e.customfunctions),this.executingContext={spatialReference:n,services:e.services,libraryResolver:new a.s(e.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:this.moduleScope,console:e.console?e.console:D,lrucache:e.lrucache,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},await R(this.executingContext,this.source.syntax)}}async function S(e,n,t){if(!0===n.preparsed){const r=t(e,null,n.arguments);return b(r),r}const r=t(e,n,await H(e,n));return b(r),r}async function R(e,n,t){if(n.breakpoint&&!0!==t){const t=n.breakpoint();return await t,R(e,n,!0)}try{switch(n?.type){case"VariableDeclarator":return await async function(e,n){let t=null;if(t=null===n.init?null:await R(e,n.init),null!==e.localScope){if(t===c.v&&(t=null),"Identifier"!==n.id.type)throw new i.aV(e,i.rH.InvalidIdentifier,n);const r=n.id.name.toLowerCase();return null!=e.localScope&&(e.localScope[r]={value:t,valueset:!0,node:n.init}),c.v}if("Identifier"!==n.id.type)throw new i.aV(e,i.rH.InvalidIdentifier,n);const r=n.id.name.toLowerCase();return t===c.v&&(t=null),e.globalScope[r]={value:t,valueset:!0,node:n.init},c.v}(e,n);case"ImportDeclaration":return await async function(e,n){const t=n.specifiers[0].local.name.toLowerCase(),r=e.libraryResolver.loadLibrary(t);let a=null;return e.libraryResolver._moduleSingletons?.has(r.uri)?a=e.libraryResolver._moduleSingletons.get(r.uri):(a=new I(r),await a.loadModule(e),e.libraryResolver._moduleSingletons?.set(r.uri,a)),e.globalScope[t]={value:a,valueset:!0,node:n},c.v}(e,n);case"ExportNamedDeclaration":return await async function(e,n){if(await R(e,n.declaration),"FunctionDeclaration"===n.declaration.type)e.exports[n.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===n.declaration.type)for(const t of n.declaration.declarations)e.exports[t.id.name.toLowerCase()]="variable";return c.v}(e,n);case"VariableDeclaration":return await k(e,n,0);case"BlockStatement":case"Program":return await async function(e,n){return M(e,n,0)}(e,n);case"FunctionDeclaration":return await async function(e,n){const t=n.id.name.toLowerCase();return e.globalScope[t]={valueset:!0,node:null,value:new A(n,e)},c.v}(e,n);case"ReturnStatement":return await async function(e,n){if(null===n.argument)return new c.R(c.v);const t=await R(e,n.argument);return new c.R(t)}(e,n);case"IfStatement":return await async function(e,n){const t=await R(e,n.test);if(!0===t)return R(e,n.consequent);if(!1===t)return null!==n.alternate?R(e,n.alternate):c.v;throw new i.aV(e,i.rH.BooleanConditionRequired,n)}(e,n);case"ExpressionStatement":return await async function(e,n){if("AssignmentExpression"===n.expression.type)return R(e,n.expression);if("CallExpression"===n.expression.type){const t=await R(e,n.expression);return t===c.v?c.v:new c.I(t)}const t=await R(e,n.expression);return t===c.v?c.v:new c.I(t)}(e,n);case"UpdateExpression":return await async function(e,n){const t=n.argument;if("MemberExpression"===t.type){const r={t:null},a=await R(e,t.object);let l=null;r.t=a,!0===t.computed?l=await R(e,t.property):"Identifier"===t.property.type&&(l=t.property.name);const s=r.t;let u;if((0,c.m)(s)){if(!(0,c.b)(l))throw new i.aV(e,i.rH.ArrayAccessorMustBeNumber,n);if(l<0&&(l=s.length+l),l<0||l>=s.length)throw new i.aV(e,i.rH.OutOfBounds,n);u=(0,c.g)(s[l]),s[l]="++"===n.operator?u+1:u-1}else if(s instanceof o.Z){if(!1===(0,c.c)(l))throw new i.aV(e,i.rH.KeyAccessorMustBeString,n);if(!0!==s.hasField(l))throw new i.aV(e,i.rH.FieldNotFound,n,{key:l});u=(0,c.g)(s.field(l)),s.setField(l,"++"===n.operator?u+1:u-1)}else if(s instanceof I){if(!1===(0,c.c)(l))throw new i.aV(e,i.rH.ModuleAccessorMustBeString,n);if(!0!==s.hasGlobal(l))throw new i.aV(e,i.rH.ModuleExportNotFound,n);u=(0,c.g)(await s.global(l)),s.setGlobal(l,"++"===n.operator?u+1:u-1)}else{if(!(0,c.w)(s))throw(0,c.x)(s)?new i.aV(e,i.rH.Immutable,n):new i.aV(e,i.rH.InvalidParameter,n);if(!1===(0,c.c)(l))throw new i.aV(e,i.rH.KeyAccessorMustBeString,n);if(!0!==s.hasField(l))throw new i.aV(e,i.rH.FieldNotFound,n,{key:l});u=(0,c.g)(s.field(l)),s.setField(l,"++"===n.operator?u+1:u-1)}return!1===n.prefix?u:"++"===n.operator?u+1:u-1}const r="Identifier"===n.argument.type?n.argument.name.toLowerCase():"";if(!r)throw new i.aV(e,i.rH.InvalidIdentifier,n);let a;if(null!=e.localScope&&void 0!==e.localScope[r])return a=(0,c.g)(e.localScope[r].value),e.localScope[r]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},!1===n.prefix?a:"++"===n.operator?a+1:a-1;if(void 0!==e.globalScope[r])return a=(0,c.g)(e.globalScope[r].value),e.globalScope[r]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},!1===n.prefix?a:"++"===n.operator?a+1:a-1;throw new i.aV(e,i.rH.InvalidIdentifier,n)}(e,n);case"AssignmentExpression":return await async function(e,n){const t=n.left;if("MemberExpression"===t.type){const r=await R(e,n.right),a=await R(e,t.object);let l=null;if(!0===t.computed)l=await R(e,t.property);else{if("Identifier"!==t.property.type)throw new i.aV(e,i.rH.InvalidIdentifier,n);l=t.property.name}if((0,c.m)(a)){if(!(0,c.b)(l))throw new i.aV(e,i.rH.ArrayAccessorMustBeNumber,n);if(l<0&&(l=a.length+l),l<0||l>a.length)throw new i.aV(e,i.rH.OutOfBounds,n);if(l===a.length){if("="!==n.operator)throw new i.aV(e,i.rH.OutOfBounds,n);a[l]=G(r,n.operator,a[l],n,e)}else a[l]=G(r,n.operator,a[l],n,e)}else if(a instanceof o.Z){if(!1===(0,c.c)(l))throw new i.aV(e,i.rH.KeyAccessorMustBeString,n);if(!0===a.hasField(l))a.setField(l,G(r,n.operator,a.field(l),n,e));else{if("="!==n.operator)throw new i.aV(e,i.rH.FieldNotFound,n,{key:l});a.setField(l,G(r,n.operator,null,n,e))}}else if(a instanceof I){if(!1===(0,c.c)(l))throw new i.aV(e,i.rH.KeyAccessorMustBeString,n);if(!0!==a.hasGlobal(l))throw new i.aV(e,i.rH.ModuleExportNotFound,n);a.setGlobal(l,G(r,n.operator,await a.global(l),n,e))}else{if(!(0,c.w)(a))throw(0,c.x)(a)?new i.aV(e,i.rH.Immutable,n):new i.aV(e,i.rH.InvalidParameter,n);if(!1===(0,c.c)(l))throw new i.aV(e,i.rH.KeyAccessorMustBeString,n);if(!0===a.hasField(l))a.setField(l,G(r,n.operator,a.field(l),n,e));else{if("="!==n.operator)throw new i.aV(e,i.rH.FieldNotFound,n,{key:l});a.setField(l,G(r,n.operator,null,n,e))}}return c.v}const r=t.name.toLowerCase();if(null!=e.localScope&&void 0!==e.localScope[r]){const t=await R(e,n.right);return e.localScope[r]={value:G(t,n.operator,e.localScope[r].value,n,e),valueset:!0,node:n.right},c.v}if(void 0!==e.globalScope[r]){const t=await R(e,n.right);return e.globalScope[r]={value:G(t,n.operator,e.globalScope[r].value,n,e),valueset:!0,node:n.right},c.v}throw new i.aV(e,i.rH.InvalidIdentifier,n)}(e,n);case"ForStatement":return await function(e,n){try{return null!==n.init?R(e,n.init).then((()=>new Promise(((t,r)=>{Z(e,n,{testResult:!0,lastAction:c.v},(e=>{t(e)}),(e=>{r(e)}),0)})))):new Promise(((t,r)=>{Z(e,n,{testResult:!0,lastAction:c.v},(e=>{t(e)}),(e=>{r(e)}),0)}))}catch(e){return Promise.reject(e)}}(e,n);case"WhileStatement":return await async function(e,n){const t={testResult:!0,lastAction:c.v};if(t.testResult=await R(e,n.test),!1===t.testResult)return c.v;if(!0!==t.testResult)throw new i.aV(e,i.rH.BooleanConditionRequired,n);for(;!0===t.testResult&&(t.lastAction=await R(e,n.body),t.lastAction!==c.o)&&!(t.lastAction instanceof c.R);)if(t.testResult=await R(e,n.test),!0!==t.testResult&&!1!==t.testResult)throw new i.aV(e,i.rH.BooleanConditionRequired,n);return t.lastAction instanceof c.R?t.lastAction:c.v}(e,n);case"ForInStatement":return await async function(e,n){return new Promise(((t,r)=>{R(e,n.right).then((a=>{try{let l=null;l="VariableDeclaration"===n.left.type?R(e,n.left):Promise.resolve(),l.then((()=>{try{let l="";if("VariableDeclaration"===n.left.type){const e=n.left.declarations[0].id;"Identifier"===e.type&&(l=e.name)}else"Identifier"===n.left.type&&(l=n.left.name);if(!l)throw new i.aV(e,i.rH.InvalidIdentifier,n);l=l.toLowerCase();let s=null;if(null!=e.localScope&&void 0!==e.localScope[l]&&(s=e.localScope[l]),null===s&&void 0!==e.globalScope[l]&&(s=e.globalScope[l]),null===s)return void r(new i.aV(e,i.rH.InvalidIdentifier,n));(0,c.m)(a)||(0,c.c)(a)?L(e,n,a,{reject:r,resolve:t},s):(0,c.x)(a)?function(e,n,t,r,a,o){try{if(void 0===o&&(o="i"),0===t.length)return void r.resolve(c.v);P(e,n,t,a,0,o,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}(e,n,a,{reject:r,resolve:t},s):a instanceof o.Z||(0,c.w)(a)?function(e,n,t,r,a){try{L(e,n,t.keys(),r,a,"k")}catch(e){r.reject(e)}}(e,n,a,{reject:r,resolve:t},s):(0,c.T)(a)?N(a.iterator(e.abortSignal),e,n,a,s,(e=>{t(e)}),(e=>{r(e)}),0):L(e,n,[],{reject:r,resolve:t},s)}catch(e){r(e)}}),r)}catch(e){r(e)}}),r)}))}(e,n);case"BreakStatement":return c.o;case"EmptyStatement":return c.v;case"ContinueStatement":return c.p;case"TemplateElement":return await async function(e,n){return n.value?n.value.cooked:""}(0,n);case"TemplateLiteral":return await async function(e,n){const t=[];for(let r=0;r<n.expressions.length;r++){const a=await R(e,n.expressions[r]);t[r]=(0,c.j)(a)}let r="",a=0;for(const o of n.quasis)r+=o.value?o.value.cooked:"",!1===o.tail&&(r+=t[a]?O(t[a],e,n):"",a++);return r}(e,n);case"Identifier":return await E(e,n);case"MemberExpression":return await async function(e,n){const t=await R(e,n.object);if(null===t)throw new i.aV(e,i.rH.MemberOfNull,n);if(!1===n.computed){if("Identifier"===n.property.type){if(t instanceof o.Z||(0,c.w)(t))return t.field(n.property.name);if(t instanceof m.Z)return(0,p.Z)(t,n.property.name,e,n);if(t instanceof I){if(!t.hasGlobal(n.property.name))throw new i.aV(e,i.rH.InvalidIdentifier,n);return t.global(n.property.name)}throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}let r=await R(e,n.property);if(t instanceof o.Z||(0,c.w)(t)){if((0,c.c)(r))return t.field(r);throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}if(t instanceof I){if((0,c.c)(r))return t.global(r);throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}if(t instanceof m.Z){if((0,c.c)(r))return(0,p.Z)(t,r,e,n);throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}if((0,c.m)(t)){if((0,c.b)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new i.aV(e,i.rH.OutOfBounds,n);return t[r]}throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}if((0,c.x)(t)){if((0,c.b)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length()+r),r>=t.length()||r<0)throw new i.aV(e,i.rH.OutOfBounds,n);return t.get(r)}throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}if((0,c.c)(t)){if((0,c.b)(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new i.aV(e,i.rH.OutOfBounds,n);return t[r]}throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}throw new i.aV(e,i.rH.InvalidMemberAccessKey,n)}(e,n);case"Literal":return n.value;case"CallExpression":return await async function(e,n){if("MemberExpression"===n.callee.type){const t=await R(e,n.callee.object);if(!(t instanceof I))throw new i.aV(e,i.rH.FuncionNotFound,n);const r=!1===n.callee.computed?n.callee.property.name:await R(e,n.callee.property);if(!t.hasGlobal(r))throw new i.aV(e,i.rH.FuncionNotFound,n);const a=await t.global(r);if(!(0,c.i)(a))throw new i.aV(e,i.rH.CallNonFunction,n);return a.call(e,n)}if("Identifier"!==n.callee.type)throw new i.aV(e,i.rH.FuncionNotFound,n);if(null!=e.localScope&&void 0!==e.localScope[n.callee.name.toLowerCase()]){const t=e.localScope[n.callee.name.toLowerCase()];if((0,c.i)(t.value))return t.value.call(e,n);throw new i.aV(e,i.rH.CallNonFunction,n)}if(void 0!==e.globalScope[n.callee.name.toLowerCase()]){const t=e.globalScope[n.callee.name.toLowerCase()];if((0,c.i)(t.value))return t.value.call(e,n);throw new i.aV(e,i.rH.CallNonFunction,n)}throw new i.aV(e,i.rH.FuncionNotFound,n)}(e,n);case"UnaryExpression":return await async function(e,n){const t=await R(e,n.argument);if((0,c.a)(t)){if("!"===n.operator)return!t;if("-"===n.operator)return-1*(0,c.g)(t);if("+"===n.operator)return 1*(0,c.g)(t);if("~"===n.operator)return~(0,c.g)(t);throw new i.aV(e,i.rH.UnsupportedUnaryOperator,n)}if("-"===n.operator)return-1*(0,c.g)(t);if("+"===n.operator)return 1*(0,c.g)(t);if("~"===n.operator)return~(0,c.g)(t);throw new i.aV(e,i.rH.UnsupportedUnaryOperator,n)}(e,n);case"BinaryExpression":return await async function(e,n){const t=[];t[0]=await R(e,n.left),t[1]=await R(e,n.right);const r=t[0],a=t[1];switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,c.u)((0,c.g)(r),(0,c.g)(a),n.operator);case"==":return(0,c.s)(r,a);case"!=":return!(0,c.s)(r,a);case"<":case">":case"<=":case">=":return(0,c.r)(r,a,n.operator);case"+":return(0,c.c)(r)||(0,c.c)(a)?(0,c.j)(r)+(0,c.j)(a):(0,c.g)(r)+(0,c.g)(a);case"-":return(0,c.g)(r)-(0,c.g)(a);case"*":return(0,c.g)(r)*(0,c.g)(a);case"/":return(0,c.g)(r)/(0,c.g)(a);case"%":return(0,c.g)(r)%(0,c.g)(a);default:throw new i.aV(e,i.rH.UnsupportedOperator,n)}}(e,n);case"LogicalExpression":return await async function(e,n){const t=await R(e,n.left);let r=null;if(!(0,c.a)(t))throw new i.aV(e,i.rH.LogicalExpressionOnlyBoolean,n);switch(n.operator){case"||":if(!0===t)return t;if(r=await R(e,n.right),(0,c.a)(r))return r;throw new i.aV(e,i.rH.LogicExpressionOrAnd,n);case"&&":if(!1===t)return t;if(r=await R(e,n.right),(0,c.a)(r))return r;throw new i.aV(e,i.rH.LogicExpressionOrAnd,n);default:throw new i.aV(e,i.rH.LogicExpressionOrAnd,n)}}(e,n);case"ArrayExpression":return await async function(e,n){const t=[];for(let r=0;r<n.elements.length;r++)t.push(await R(e,n.elements[r]));for(let r=0;r<t.length;r++){if((0,c.i)(t[r]))throw new i.aV(e,i.rH.NoFunctionInArray,n);t[r]===c.v&&(t[r]=null)}return t}(e,n);case"ObjectExpression":return await async function(e,n){const t=[];for(let r=0;r<n.properties.length;r++)t[r]=await R(e,n.properties[r]);const r={},a=new Map;for(let o=0;o<t.length;o++){const l=t[o];if((0,c.i)(l.value))throw new i.aV(e,i.rH.NoFunctionInDictionary,n);if(!1===(0,c.c)(l.key))throw new i.aV(e,i.rH.KeyMustBeString,n);let s=l.key.toString();const u=s.toLowerCase();a.has(u)?s=a.get(u):a.set(u,s),l.value===c.v?r[s]=null:r[s]=l.value}const l=new o.Z(r);return l.immutable=!1,l}(e,n);case"Property":return await async function(e,n){const t=await R(e,n.value);return"Identifier"===n.key.type?{key:n.key.name,value:t}:{key:await R(e,n.key),value:t}}(e,n);default:throw new i.aV(e,i.rH.Unrecognised,n)}}catch(t){throw(0,i.VO)(e,n,t)}}async function F(e,n,t){const r=await R(e,n.body);return t.lastAction=r,t.lastAction===c.o||t.lastAction instanceof c.R?(t.testResult=!1,t):null!==n.update?(await R(e,n.update),t):t}function Z(e,n,t,r,a,o){try{(async function(e,n,t){if(null!==n.test){const r=await R(e,n.test);if(!0===e.abortSignal?.aborted)throw new i.aV(e,i.rH.Cancelled,n);if(t.testResult=r,!1===t.testResult)return t;if(!0!==t.testResult)throw new i.aV(e,i.rH.BooleanConditionRequired,n);return F(e,n,t)}return F(e,n,t)})(e,n,t).then((()=>{try{!0===t.testResult?++o>V?(o=0,setTimeout((()=>{Z(e,n,t,r,a,o)}),0)):Z(e,n,t,r,a,o):t.lastAction instanceof c.R?r(t.lastAction):r(c.v)}catch(e){a(e)}}),(e=>{a(e)}))}catch(e){a(e)}}function C(e,n,t,r,a,o,i,l,s,u){try{if(r<=o)return void l(c.v);a.value="k"===i?t[o]:o,R(e,n.body).then((f=>{try{f instanceof c.R?l(f):f===c.o?l(c.v):++u>V?(u=0,setTimeout((()=>{C(e,n,t,r,a,o+1,i,l,s,u)}),0)):C(e,n,t,r,a,o+1,i,l,s,u)}catch(e){s(e)}}),(e=>{s(e)}))}catch(e){s(e)}}function P(e,n,t,r,a,o,i,l,s){try{if(t.length()<=a)return void i(c.v);r.value="k"===o?t.get(a):a,R(e,n.body).then((u=>{u instanceof c.R?i(u):u===c.o?i(c.v):++s>V?(s=0,setTimeout((()=>{P(e,n,t,r,a+1,o,i,l,s)}),0)):P(e,n,t,r,a+1,o,i,l,s)}),(e=>{l(e)}))}catch(e){l(e)}}function L(e,n,t,r,a,o){try{if(void 0===o&&(o="i"),0===t.length)return void r.resolve(c.v);C(e,n,t,t.length,a,0,o,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}function N(e,n,t,r,a,o,i,s){try{e.next().then((u=>{try{if(null===u)o(c.v);else{const f=l.Z.createFromGraphicLikeObject(u.geometry,u.attributes,r);f._underlyingGraphic=u,a.value=f,R(n,t.body).then((l=>{try{l===c.o?o(c.v):l instanceof c.R?o(l):++s>V?(s=0,setTimeout((()=>{N(e,n,t,r,a,o,i,s)}),0)):N(e,n,t,r,a,o,i,s)}catch(e){i(e)}}),(e=>{i(e)}))}}catch(e){i(e)}}),(e=>{i(e)}))}catch(e){i(e)}}function G(e,n,t,r,a){switch(n){case"=":return e===c.v?null:e;case"/=":return(0,c.g)(t)/(0,c.g)(e);case"*=":return(0,c.g)(t)*(0,c.g)(e);case"-=":return(0,c.g)(t)-(0,c.g)(e);case"+=":return(0,c.c)(t)||(0,c.c)(e)?(0,c.j)(t)+(0,c.j)(e):(0,c.g)(t)+(0,c.g)(e);case"%=":return(0,c.g)(t)%(0,c.g)(e);default:throw new i.aV(a,i.rH.UnsupportedOperator,r)}}async function M(e,n,t){if(t>=n.body.length)return c.v;const r=await R(e,n.body[t]);return r instanceof c.R||r===c.o||r===c.p||t===n.body.length-1?r:M(e,n,t+1)}async function k(e,n,t){return t>=n.declarations.length||(await R(e,n.declarations[t]),t===n.declarations.length-1||await k(e,n,t+1)),c.v}async function E(e,n){const t=n.name.toLowerCase();if(null!=e.localScope&&void 0!==e.localScope[t]){const n=e.localScope[t];if(!0===n.valueset)return n.value;if(null!==n.d)return n.d;n.d=R(e,n.node);const r=await n.d;return n.value=r,n.valueset=!0,r}if(void 0!==e.globalScope[t]){const n=e.globalScope[t];if(!0===n.valueset)return n.value;if(null!==n.d)return n.d;n.d=R(e,n.node);const r=await n.d;return n.value=r,n.valueset=!0,r}throw new i.aV(e,i.rH.InvalidIdentifier,n)}function O(e,n,t){if((0,c.i)(e))throw new i.aV(n,i.rH.NoFunctionInTemplateLiteral,t);return e}const z={};async function B(e,n,t,r){const a=await R(e,n.arguments[t]);if((0,c.s)(a,r))return R(e,n.arguments[t+1]);const o=n.arguments.length-t;return 1===o?R(e,n.arguments[t]):2===o?null:3===o?R(e,n.arguments[t+2]):B(e,n,t+2,r)}async function j(e,n,t,r){if(!0===r)return R(e,n.arguments[t+1]);if(3==n.arguments.length-t)return R(e,n.arguments[t+2]);const a=await R(e,n.arguments[t+2]);if(!1===(0,c.a)(a))throw new i.aV(e,i.rH.ModuleExportNotFound,n.arguments[t+2]);return j(e,n,t+2,a)}async function q(e,n,t,r){const a=e.body;if(t.length!==e.params.length)throw new i.aV(n,i.rH.WrongNumberOfParameters,null);for(let r=0;r<t.length;r++){const a=e.params[r];"Identifier"===a.type&&null!=n.localScope&&(n.localScope[a.name.toLowerCase()]={d:null,value:t[r],valueset:!0,node:null})}const o=await R(n,a);if(o instanceof c.R)return o.value;if(o===c.o)throw new i.aV(n,i.rH.UnexpectedToken,r);if(o===c.p)throw new i.aV(n,i.rH.UnexpectedToken,r);return o instanceof c.I?o.value:o}(0,d.r)(z,x),(0,y.r)(z,x),(0,h.r)(z,x),(0,p.r)(z,x),(0,g.r)(z,x),(0,w.registerFunctions)({functions:z,compiled:!1,signatures:null,evaluateIdentifier:null,mode:"async",standardFunction:x,standardFunctionAsync:S}),z.iif=async function(e,n){(0,c.y)(null===n.arguments?[]:n.arguments,3,3,e,n);const t=await R(e,n.arguments[0]);if(!1===(0,c.a)(t))throw new i.aV(e,i.rH.BooleanConditionRequired,n);return R(e,t?n.arguments[1]:n.arguments[2])},z.decode=async function(e,n){if(n.arguments.length<2)throw new i.aV(e,i.rH.WrongNumberOfParameters,n);if(2===n.arguments.length)return R(e,n.arguments[1]);if((n.arguments.length-1)%2==0)throw new i.aV(e,i.rH.WrongNumberOfParameters,n);return B(e,n,1,await R(e,n.arguments[0]))},z.when=async function(e,n){if(n.arguments.length<3)throw new i.aV(e,i.rH.WrongNumberOfParameters,n);if(n.arguments.length%2==0)throw new i.aV(e,i.rH.WrongNumberOfParameters,n);const t=await R(e,n.arguments[0]);if(!1===(0,c.a)(t))throw new i.aV(e,i.rH.BooleanConditionRequired,n.arguments[0]);return j(e,n,0,t)};const K={fixSpatialReference:c.q,parseArguments:H,standardFunction:x,standardFunctionAsync:S,evaluateIdentifier:E};for(const e in z)z[e]={value:new s.Bx(z[e]),valueset:!0,node:null};const T=function(){};function W(e,n){const t=new T;null==e&&(e={}),null==n&&(n={});const r=new o.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1,t.textformatting={value:r,valueset:!0,node:null};for(const e in n)t[e]={value:new s.Bx(n[e]),native:!0,valueset:!0,node:null};for(const n in e)e[n]&&"esri.Graphic"===e[n].declaredClass?t[n]={value:l.Z.createFromGraphic(e[n]),valueset:!0,node:null}:t[n]={value:e[n],valueset:!0,node:null};return t}function D(e){console.log(e)}(T.prototype=z).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},T.prototype.pi={value:Math.PI,valueset:!0,node:null};const U=K;function _(e){const n={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:x,standardFunctionAsync:S,evaluateIdentifier:E};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const e in n.functions)z[e]={value:new s.Bx(n.functions[e]),valueset:!0,node:null},T.prototype[e]=z[e];for(let e=0;e<n.signatures.length;e++)(0,u.gW)(n.signatures[e],"async")}async function J(e,n){let t=n.spatialReference;null==t&&(t=new v.Z({wkid:102100}));let r=null;e.usesModules&&(r=new a.s(new Map,e.loadedModules));const o=W(n.vars,n.customfunctions),l={spatialReference:t,services:n.services,exports:{},libraryResolver:r,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,globalScope:o,console:n.console?n.console:D,lrucache:n.lrucache,interceptor:n.interceptor,localScope:null,depthCounter:{depth:1}};let s=await R(l,e);if(s instanceof c.R&&(s=s.value),s instanceof c.I&&(s=s.value),s===c.v&&(s=null),s===c.o)throw new i.aV(l,i.rH.IllegalResult,null);if(s===c.p)throw new i.aV(l,i.rH.IllegalResult,null);if((0,c.i)(s))throw new i.aV(l,i.rH.IllegalResult,null);return s}_([f.A])},88163:(e,n,t)=>{t.r(n),t.d(n,{registerFunctions:()=>b});var r=t(88256),a=t(4080),o=t(94837),i=t(5306),l=t(91772),s=t(20031),c=t(15917),u=t(74304),f=t(67666),d=t(89542),w=t(90819),p=t(53736),h=t(7182),g=t(17321);function y(e){return 0===r.i8.indexOf("4.")?d.Z.fromExtent(e):new d.Z({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function m(e,n,t){if((0,o.y)(e,2,2,n,t),e[0]instanceof s.Z&&e[1]instanceof s.Z);else if(e[0]instanceof s.Z&&null===e[1]);else if(e[1]instanceof s.Z&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new h.aV(n,h.rH.InvalidParameter,t)}async function v(e,n){if("polygon"!==e.type&&"polyline"!==e.type&&"extent"!==e.type)return 0;let t=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(t=(0,i._R)(e.spatialReference)/(0,g.c9)(e.spatialReference));let r=0;if("polyline"===e.type)for(const n of e.paths)for(let e=1;e<n.length;e++)r+=(0,i.AW)(n[e],n[e-1],t);else if("polygon"===e.type)for(const n of e.rings){for(let e=1;e<n.length;e++)r+=(0,i.AW)(n[e],n[e-1],t);(n[0][0]!==n[n.length-1][0]||n[0][1]!==n[n.length-1][1]||void 0!==n[0][2]&&n[0][2]!==n[n.length-1][2])&&(r+=(0,i.AW)(n[0],n[n.length-1],t))}else"extent"===e.type&&(r+=2*(0,i.AW)([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],t),r+=2*(0,i.AW)([e.xmin,e.ymin,0],[e.xmin,e.ymax,0],t),r*=2,r+=4*Math.abs((0,o.A)(e.zmax,0)*t-(0,o.A)(e.zmin,0)*t));const a=new w.Z({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:[[0,0],[0,r]]});return(0,c.sz)(a,n)}function b(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(m(a=(0,o.G)(a),n,t),null===a[0]||null===a[1]||(0,c.ED)(a[0],a[1]))))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(m(a=(0,o.G)(a),n,t),null!==a[0]&&null!==a[1]&&(0,c.kK)(a[0],a[1]))))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(m(a=(0,o.G)(a),n,t),null!==a[0]&&null!==a[1]&&(0,c.W4)(a[0],a[1]))))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(m(a=(0,o.G)(a),n,t),null!==a[0]&&null!==a[1]&&(0,c.jU)(a[0],a[1]))))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(m(a=(0,o.G)(a),n,t),null!==a[0]&&null!==a[1]&&(0,c.uh)(a[0],a[1]))))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(m(a=(0,o.G)(a),n,t),null!==a[0]&&null!==a[1]&&(0,c.r3)(a[0],a[1]))))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(m(a=(0,o.G)(a),n,t),null!==a[0]&&null!==a[1]&&(0,c.Nm)(a[0],a[1]))))},e.functions.equals=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>((0,o.y)(a,2,2,n,t),a[0]===a[1]||(a[0]instanceof s.Z&&a[1]instanceof s.Z?(0,c.fS)(a[0],a[1]):!(!(0,o.k)(a[0])||!(0,o.k)(a[1]))&&a[0].getTime()===a[1].getTime()))))},e.functions.relate=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,o.G)(a),(0,o.y)(a,3,3,n,t),a[0]instanceof s.Z&&a[1]instanceof s.Z)return(0,c.LV)(a[0],a[1],(0,o.j)(a[2]));if(a[0]instanceof s.Z&&null===a[1])return!1;if(a[1]instanceof s.Z&&null===a[0])return!1;if(null===a[0]&&null===a[1])return!1;throw new h.aV(n,h.rH.InvalidParameter,t)}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>(m(a=(0,o.G)(a),n,t),null===a[0]||null===a[1]?null:(0,c.wf)(a[0],a[1]))))},e.functions.union=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{const l=[];if(0===(i=(0,o.G)(i)).length)throw new h.aV(n,h.rH.WrongNumberOfParameters,t);if(1===i.length)if((0,o.m)(i[0])){const e=(0,o.G)(i[0]);for(let r=0;r<e.length;r++)if(null!==e[r]){if(!(e[r]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);l.push(e[r])}}else{if(!(0,o.x)(i[0])){if(i[0]instanceof s.Z)return(0,o.q)((0,a.r1)(i[0]),n.spatialReference);if(null===i[0])return null;throw new h.aV(n,h.rH.InvalidParameter,t)}{const e=(0,o.G)(i[0].toArray());for(let r=0;r<e.length;r++)if(null!==e[r]){if(!(e[r]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);l.push(e[r])}}}else for(let e=0;e<i.length;e++)if(null!==i[e]){if(!(i[e]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);l.push(i[e])}return 0===l.length?null:(0,c.G0)(l)}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>(m(i=(0,o.G)(i),n,t),null!==i[0]&&null===i[1]?(0,a.r1)(i[0]):null===i[0]?null:(0,c.e5)(i[0],i[1]))))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>(m(i=(0,o.G)(i),n,t),null===i[0]&&null===i[1]?null:null===i[0]?(0,a.r1)(i[1]):null===i[1]?(0,a.r1)(i[0]):(0,c.Sp)(i[0],i[1]))))},e.functions.clip=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,o.G)(a),(0,o.y)(a,2,2,n,t),!(a[1]instanceof l.Z)&&null!==a[1])throw new h.aV(n,h.rH.InvalidParameter,t);if(null===a[0])return null;if(!(a[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return null===a[1]?null:(0,c.oq)(a[0],a[1])}))},e.functions.cut=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{if(i=(0,o.G)(i),(0,o.y)(i,2,2,n,t),!(i[1]instanceof w.Z)&&null!==i[1])throw new h.aV(n,h.rH.InvalidParameter,t);if(null===i[0])return[];if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return null===i[1]?[(0,a.r1)(i[0])]:(0,c.z7)(i[0],i[1])}))},e.functions.area=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if((0,o.y)(i,1,2,n,t),null===(i=(0,o.G)(i))[0])return 0;if((0,o.T)(i[0])){const e=await i[0].sumArea((0,a.EI)((0,o.A)(i[1],-1)),!1,n.abortSignal);if(n.abortSignal.aborted)throw new h.aV(n,h.rH.Cancelled,t);return e}if((0,o.m)(i[0])||(0,o.x)(i[0])){const e=(0,o.J)(i[0],n.spatialReference);return null===e?0:(0,c.CJ)(e,(0,a.EI)((0,o.A)(i[1],-1)))}if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.CJ)(i[0],(0,a.EI)((0,o.A)(i[1],-1)))}))},e.functions.areageodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if((0,o.y)(i,1,2,n,t),null===(i=(0,o.G)(i))[0])return 0;if((0,o.T)(i[0])){const e=await i[0].sumArea((0,a.EI)((0,o.A)(i[1],-1)),!0,n.abortSignal);if(n.abortSignal.aborted)throw new h.aV(n,h.rH.Cancelled,t);return e}if((0,o.m)(i[0])||(0,o.x)(i[0])){const e=(0,o.J)(i[0],n.spatialReference);return null===e?0:(0,c.Y4)(e,(0,a.EI)((0,o.A)(i[1],-1)))}if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.Y4)(i[0],(0,a.EI)((0,o.A)(i[1],-1)))}))},e.functions.length=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if((0,o.y)(i,1,2,n,t),null===(i=(0,o.G)(i))[0])return 0;if((0,o.T)(i[0])){const e=await i[0].sumLength((0,a.Lz)((0,o.A)(i[1],-1)),!1,n.abortSignal);if(n.abortSignal.aborted)throw new h.aV(n,h.rH.Cancelled,t);return e}if((0,o.m)(i[0])||(0,o.x)(i[0])){const e=(0,o.H)(i[0],n.spatialReference);return null===e?0:(0,c.sz)(e,(0,a.Lz)((0,o.A)(i[1],-1)))}if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.sz)(i[0],(0,a.Lz)((0,o.A)(i[1],-1)))}))},e.functions.length3d=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{if((0,o.y)(i,1,2,n,t),null===(i=(0,o.G)(i))[0])return 0;if((0,o.m)(i[0])||(0,o.x)(i[0])){const e=(0,o.H)(i[0],n.spatialReference);return null===e?0:!0===e.hasZ?v(e,(0,a.Lz)((0,o.A)(i[1],-1))):(0,c.sz)(e,(0,a.Lz)((0,o.A)(i[1],-1)))}if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return!0===i[0].hasZ?v(i[0],(0,a.Lz)((0,o.A)(i[1],-1))):(0,c.sz)(i[0],(0,a.Lz)((0,o.A)(i[1],-1)))}))},e.functions.lengthgeodetic=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{if((0,o.y)(i,1,2,n,t),null===(i=(0,o.G)(i))[0])return 0;if((0,o.T)(i[0])){const e=await i[0].sumLength((0,a.Lz)((0,o.A)(i[1],-1)),!0,n.abortSignal);if(n.abortSignal.aborted)throw new h.aV(n,h.rH.Cancelled,t);return e}if((0,o.m)(i[0])||(0,o.x)(i[0])){const e=(0,o.H)(i[0],n.spatialReference);return null===e?0:(0,c.kQ)(e,(0,a.Lz)((0,o.A)(i[1],-1)))}if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.kQ)(i[0],(0,a.Lz)((0,o.A)(i[1],-1)))}))},e.functions.distance=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{i=(0,o.G)(i),(0,o.y)(i,2,3,n,t);let l=i[0];((0,o.m)(i[0])||(0,o.x)(i[0]))&&(l=(0,o.K)(i[0],n.spatialReference));let u=i[1];if(((0,o.m)(i[1])||(0,o.x)(i[1]))&&(u=(0,o.K)(i[1],n.spatialReference)),!(l instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);if(!(u instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.TE)(l,u,(0,a.Lz)((0,o.A)(i[2],-1)))}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{i=(0,o.G)(i),(0,o.y)(i,2,3,n,t);const l=i[0],s=i[1];if(!(l instanceof f.Z))throw new h.aV(n,h.rH.InvalidParameter,t);if(!(s instanceof f.Z))throw new h.aV(n,h.rH.InvalidParameter,t);const u=new w.Z({paths:[],spatialReference:l.spatialReference});return u.addPath([l,s]),(0,c.kQ)(u,(0,a.Lz)((0,o.A)(i[2],-1)))}))},e.functions.densify=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{if(i=(0,o.G)(i),(0,o.y)(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);const u=(0,o.g)(i[1]);if(isNaN(u))throw new h.aV(n,h.rH.InvalidParameter,t);if(u<=0)throw new h.aV(n,h.rH.InvalidParameter,t);return i[0]instanceof d.Z||i[0]instanceof w.Z?(0,c.Cz)(i[0],u,(0,a.Lz)((0,o.A)(i[2],-1))):i[0]instanceof l.Z?(0,c.Cz)(y(i[0]),u,(0,a.Lz)((0,o.A)(i[2],-1))):i[0]}))},e.functions.densifygeodetic=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{if(i=(0,o.G)(i),(0,o.y)(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);const u=(0,o.g)(i[1]);if(isNaN(u))throw new h.aV(n,h.rH.InvalidParameter,t);if(u<=0)throw new h.aV(n,h.rH.InvalidParameter,t);return i[0]instanceof d.Z||i[0]instanceof w.Z?(0,c.j2)(i[0],u,(0,a.Lz)((0,o.A)(i[2],-1))):i[0]instanceof l.Z?(0,c.j2)(y(i[0]),u,(0,a.Lz)((0,o.A)(i[2],-1))):i[0]}))},e.functions.generalize=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{if(i=(0,o.G)(i),(0,o.y)(i,2,4,n,t),null===i[0])return null;if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);const l=(0,o.g)(i[1]);if(isNaN(l))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.D$)(i[0],l,(0,o.h)((0,o.A)(i[2],!0)),(0,a.Lz)((0,o.A)(i[3],-1)))}))},e.functions.buffer=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{if(i=(0,o.G)(i),(0,o.y)(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);const l=(0,o.g)(i[1]);if(isNaN(l))throw new h.aV(n,h.rH.InvalidParameter,t);return 0===l?(0,a.r1)(i[0]):(0,c.f3)(i[0],l,(0,a.Lz)((0,o.A)(i[2],-1)))}))},e.functions.buffergeodetic=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{if(i=(0,o.G)(i),(0,o.y)(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);const l=(0,o.g)(i[1]);if(isNaN(l))throw new h.aV(n,h.rH.InvalidParameter,t);return 0===l?(0,a.r1)(i[0]):(0,c.rd)(i[0],l,(0,a.Lz)((0,o.A)(i[2],-1)))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,((e,r,i)=>{if(i=(0,o.G)(i),(0,o.y)(i,2,6,n,t),null===i[0])return null;if(!(i[0]instanceof d.Z||i[0]instanceof w.Z))throw new h.aV(n,h.rH.InvalidParameter,t);const l=(0,o.g)(i[1]);if(isNaN(l))throw new h.aV(n,h.rH.InvalidParameter,t);const s=(0,o.g)((0,o.A)(i[4],10));if(isNaN(s))throw new h.aV(n,h.rH.InvalidParameter,t);const u=(0,o.g)((0,o.A)(i[5],0));if(isNaN(u))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.cv)(i[0],l,(0,a.Lz)((0,o.A)(i[2],-1)),(0,o.j)((0,o.A)(i[3],"round")).toLowerCase(),s,u)}))},e.functions.rotate=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{a=(0,o.G)(a),(0,o.y)(a,2,3,n,t);let i=a[0];if(null===i)return null;if(!(i instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);i instanceof l.Z&&(i=d.Z.fromExtent(i));const u=(0,o.g)(a[1]);if(isNaN(u))throw new h.aV(n,h.rH.InvalidParameter,t);const w=(0,o.A)(a[2],null);if(null===w)return(0,c.U1)(i,u);if(w instanceof f.Z)return(0,c.U1)(i,u,w);throw new h.aV(n,h.rH.InvalidParameter,t)}))},e.functions.centroid=function(n,t){return e.standardFunctionAsync(n,t,((e,r,c)=>{if(c=(0,o.G)(c),(0,o.y)(c,1,1,n,t),null===c[0])return null;let p=c[0];if(((0,o.m)(c[0])||(0,o.x)(c[0]))&&(p=(0,o.K)(c[0],n.spatialReference)),null===p)return null;if(!(p instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return p instanceof f.Z?(0,o.q)((0,a.r1)(c[0]),n.spatialReference):p instanceof d.Z?p.centroid:p instanceof w.Z?(0,i.s9)(p):p instanceof u.Z?(0,i.Ay)(p):p instanceof l.Z?p.center:null}))},e.functions.multiparttosinglepart=function(n,t){return e.standardFunctionAsync(n,t,(async(e,r,i)=>{i=(0,o.G)(i),(0,o.y)(i,1,1,n,t);const g=[];if(null===i[0])return null;if(!(i[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);if(i[0]instanceof f.Z)return[(0,o.q)((0,a.r1)(i[0]),n.spatialReference)];if(i[0]instanceof l.Z)return[(0,o.q)((0,a.r1)(i[0]),n.spatialReference)];const y=await(0,c.og)(i[0]);if(y instanceof d.Z){const e=[],n=[];for(let t=0;t<y.rings.length;t++)if(y.isClockwise(y.rings[t])){const n=(0,p.im)({rings:[y.rings[t]],hasZ:!0===y.hasZ,hazM:!0===y.hasM,spatialReference:y.spatialReference.toJSON()});e.push(n)}else n.push({ring:y.rings[t],pt:y.getPoint(t,0)});for(let t=0;t<n.length;t++)for(let r=0;r<e.length;r++)if(e[r].contains(n[t].pt)){e[r].addRing(n[t].ring);break}return e}if(y instanceof w.Z){const e=[];for(let n=0;n<y.paths.length;n++){const t=(0,p.im)({paths:[y.paths[n]],hasZ:!0===y.hasZ,hazM:!0===y.hasM,spatialReference:y.spatialReference.toJSON()});e.push(t)}return e}if(i[0]instanceof u.Z){const e=(0,o.q)((0,a.r1)(i[0]),n.spatialReference);for(let n=0;n<e.points.length;n++)g.push(e.getPoint(n));return g}return null}))},e.functions.issimple=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,o.G)(a),(0,o.y)(a,1,1,n,t),null===a[0])return!0;if(!(a[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.Gg)(a[0])}))},e.functions.simplify=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,o.G)(a),(0,o.y)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.og)(a[0])}))},e.functions.convexhull=function(n,t){return e.standardFunctionAsync(n,t,((e,r,a)=>{if(a=(0,o.G)(a),(0,o.y)(a,1,1,n,t),null===a[0])return null;if(!(a[0]instanceof s.Z))throw new h.aV(n,h.rH.InvalidParameter,t);return(0,c.JI)(a[0])}))})}}}]);